# .github/workflows/test.yml

# 1ï¸âƒ£ workflow çš„åå­—ï¼ˆä¼šæ˜¾ç¤ºåœ¨ GitHub Actions é¡µé¢ï¼‰
name: Flutter Test & Lint

# 2ï¸âƒ£ è§¦å‘æ¡ä»¶ï¼šå½“ push æˆ– pull_request æ—¶è¿è¡Œ
on: [push, pull_request]

# 3ï¸âƒ£ å®šä¹‰ä»»åŠ¡ï¼ˆjobsï¼‰
jobs:
  # ä»»åŠ¡ IDï¼ˆè‡ªå®šä¹‰ï¼Œå¦‚ testã€build_androidï¼‰
  analyze_and_test:
    # ä»»åŠ¡æ˜¾ç¤ºåç§°ï¼ˆå¯é€‰ï¼Œå¸¦ emoji æ›´é†’ç›® ğŸ˜Šï¼‰
    name: ğŸ§ª Run Flutter Analyze + Test
    # åœ¨ä»€ä¹ˆç³»ç»Ÿä¸Šè¿è¡Œï¼ˆFlutter æ”¯æŒ ubuntu-latest, windows-latest, macos-latestï¼‰
    runs-on: ubuntu-latest

    # 4ï¸âƒ£ æ­¥éª¤ï¼ˆstepsï¼‰
    steps:
      # â‘  æ£€å‡ºä»£ç 
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      # â‘¡ è®¾ç½® Flutter ç¯å¢ƒï¼ˆä½¿ç”¨ç¤¾åŒºæµè¡Œ actionï¼‰
      - name: âš™ï¸ Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          channel: stable # å¯é€‰: stable, beta, dev

      # â‘¢ è·å–ä¾èµ–
      - name: ğŸ“¦ Get dependencies
        run: flutter pub get

      # â‘£ é™æ€åˆ†æï¼ˆæ£€æŸ¥ä»£ç è§„èŒƒï¼‰
      - name: ğŸ” Analyze code
        run: flutter analyze

      # â‘¤ è¿è¡Œå•å…ƒæµ‹è¯•
      - name: ğŸ§ª Run tests
        run: flutter test
